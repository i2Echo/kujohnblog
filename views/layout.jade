doctype html
html
  head
    meta(charset="utf-8")
    meta(http-equiv="X-UA-Compatible" content="IE=edge")
    meta(name='viewport' content='width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0')
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css')
    link(rel='stylesheet', href='/stylesheets/bootstrap.min.css')
    link(rel='stylesheet', href='/stylesheets/bootstrap-theme.min.css')
    link(rel='stylesheet', href='/stylesheets/font-awesome.min.css')
    link(rel='stylesheet', href='/plugins/summernote/summernote.css')

    <!--[if IE]>
    <script src="http://libs.useso.com/js/html5shiv/3.7/html5shiv.min.js"></script>
    <![endif]-->

  body
    include include/modalSignWindow
    header.navbar.navbar-inverse.navbar-fixed-top(role='navigation')
      .container-fluid
        .navbar-header
          button.navbar-toggle.collapsed(type='button', data-toggle='collapse', data-target='#bs-navbar')
            span.sr-only Toggle Navigation
            span.icon-bar
            span.icon-bar
            span.icon-bar
          if user
            a.navbar-brand#logo-img(href='/user/#{user.name}',title="#{user.name}", data-container="body", data-toggle="popover", data-trigger="hover", data-placement="bottom", data-content="")
              img.img-circle(width='40', height='40', src='/images/logo.png')

        .collapse.navbar-collapse#bs-navbar
          ul.nav.navbar-nav.text-center
            li.active
              a(href='/') Home
            li
              a(href='#') Archives
            li
              a(href='#') About
          .nav.navbar-nav.navbar-right.text-center#user
            if !user
                button.btn.btn-default.navbar-btn#login-btn(type='button',data-toggle='modal',data-target='#login') Sign in
                button.btn.btn-success.navbar-btn#reg-btn(type='button',data-toggle='modal',data-target='#reg') Sign up
            else
                a.btn.btn-default.navbar-btn#signout-btn(type='button', href='/signout') Sign out
                a.btn.btn-success.navbar-btn#post-btn(type='button', href='/post') Post
                
      if (success)
        .alert.alert-success#alertMessage
          a.close(data-dismiss="alert") &times;
          strong #{success}
      if (error)
        .alert.alert-danger#alertMessage
          a.close(data-dismiss="alert") &times;
          strong #{error}

    .head-img
      img.fixed-bg(src='/images/bg.jpg')
    .main.container-fluid
      .container
        .row
          .col-sm-8.blog-main
            block content
          .col-sm-4.page-sidebar
            block sidebar
      footer.bs-footer.pull-left
        p.copyright.text-center Powered by <a id='author' href='#'>echo</a> &copy;2016
    #totop(style="opacity: 1; display: block;")
      a(title="返回顶部")
        img(src='/images/scrollup.png')

    //script(type='text/javascript', src='/javascripts/jquery-1.12.1.js')
    script(type='text/javascript', src='//cdn.bootcss.com/jquery/2.1.4/jquery.min.js')
    script.
      window.jQuery || document.write('<script src="js/jquery-2.1.4.min.js"><\/script>')

    script(type='text/javascript', src='/javascripts/bootstrap.min.js')
    script(type='text/javascript', src='/javascripts/totop.js')
    script(type='text/javascript', src='/plugins/summernote/summernote.js')
    //script(type='text/javascript', src='//cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js')
    //script(type='text/javascript', src='/plugins/markdownEditor/ace.js')
    //script(type='text/javascript', src='/plugins/markdownEditor/marked.min.js')
    //script(type='text/javascript', src='/plugins/markdownEditor/bootstrap-markdown-editor.js')
    if (success || error)
      script.
        $("#alertMessage").fadeTo(2000, 1000).slideUp(1000, function () {
          $("#alertMessage").alert('close');
        });
    script.
      $(document).ready(function(){
        $('#summernote').summernote({
          height: 150,
          codemirror: { // codemirror options
            theme: 'monokai'
          },
          focus: true,
          placeholder: 'write here...'
        });
        $(".close").click(function () {
          $("#alertMessage").alert();
        }); 
        $('.upload').on('click', function(e) { 
          e.preventDefault(); $(this).closest('input[type=file]').trigger('click');
        });       
      });
      $(function (){ 
          $("[data-toggle='popover']").popover();

          $('[data-toggle="tooltip"]').tooltip();
      });